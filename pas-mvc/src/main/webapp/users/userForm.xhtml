<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<f:metadata>
    <f:viewParam name="login" value="#{userFormController.login}"/>
    <f:event listener="#{userFormController.init}" type="preRenderView"/>
</f:metadata>
<f:view>
    <h:head>
        <title>#{msg['edit_user']}</title>
    </h:head>
    <body>
    <ui:composition template="/common/templateLayout.xhtml">
    <ui:define name="content">
    <h:outputLabel value="#{msg['edit_user']}"/>
    <h:form rendered="#{not empty userFormController.newUser}">
        <h:inputHidden value="#{userFormController.login}"/>
        #{msg['firstname']}: <h:inputText value="#{userFormController.newUser.firstName}"/><br/>
        #{msg['lastname']}: <h:inputText value="#{userFormController.newUser.lastName}"/><br/>
        <h:outputText value="#{msg['user_login']}:" rendered="#{userFormController.newUser.login == null}"/>
        <h:inputText value="#{userFormController.newUser.login}" rendered="#{userFormController.newUser.login == null}"/><br/>
        #{msg['password']}: <h:inputSecret value="#{userFormController.newUser.password}" redisplay="true"/><br/>
        #{msg['type']}:
        <h:selectOneMenu value="#{userFormController.newUser.role}">
            <f:selectItems value="#{userFormController.newUser.possibleRoles}" />
        </h:selectOneMenu><br/>
        #{msg['active']}: <h:selectBooleanCheckbox  value="#{userFormController.newUser.active}"/><br/>
        <h:commandButton value="#{msg['submit']}" action="#{userFormController.saveUser}" binding="#{userFormController.btn}" >
            <f:setPropertyActionListener target="#{userFormController.login}" value="#{userFormController.newUser.login}"/>
        </h:commandButton>
        <br/>
        <h:commandButton value="#{msg['back']}" action="usersList"/><br/>
    </h:form>
    </ui:define>
    </ui:composition>
    </body>
</f:view>
</html>
