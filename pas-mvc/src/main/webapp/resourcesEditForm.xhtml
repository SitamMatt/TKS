<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<f:metadata>
    <f:viewParam name="resUUID" value="#{resourceEditController.resUUID}"/>
    <f:event listener="#{resourceEditController.init}" type="preRenderView"/>
</f:metadata>

<f:view>
    <h:head>
        <title>#{msg['edit_resource']}</title>
    </h:head>
    <body>
    <ui:composition template="/common/templateLayout.xhtml">
    <ui:define name="content">
    <h:outputLabel value="#{msg['edit_resource']}"/>
    <h:form rendered="#{not empty resourceEditController.newResource}">
        <h:inputHidden value="#{resourceEditController.resUUID}"/>
        #{msg['title']}: <h:inputText value="#{resourceEditController.newResource.title}"/><br/>
        #{msg['num_of_pages']}: <h:inputText value="#{resourceEditController.newResource.pagesCount}"/><br/>
        #{msg['publishing_house']}: <h:inputText value="#{resourceEditController.newResource.publishingHouse}"/><br/>
        #{msg['type']}:
        <h:selectOneMenu value="#{resourceEditController.newResource.resType}">
            <f:selectItem itemValue="Book" itemLabel="Book"/>
            <f:selectItem itemValue="Magazine" itemLabel="Magazine"/>
            <f:ajax render="input"/>
        </h:selectOneMenu><br/>
        <h:panelGroup id="input">
            <h:outputText value="#{msg['author']}: " rendered="#{resourceEditController.newResource.resType == 'Book'}"/>
            <h:inputText value="#{resourceEditController.newResource.author}"
                                 rendered="#{resourceEditController.newResource.resType == 'Book'}"/>
            <h:outputText value="#{msg['magazine_number']}: " rendered="#{resourceEditController.newResource.resType == 'Magazine'}"/>
            <h:inputText value="#{resourceEditController.newResource.magazineNumber}"
                                          rendered="#{resourceEditController.newResource.resType == 'Magazine'}"/>
        </h:panelGroup><br/><br/>
        <h:commandButton value="#{msg['submit']}" action="#{resourceEditController.saveResource}">
            <f:setPropertyActionListener target="#{resourceEditController.resUUID}" value="#{resourceEditController.newResource.id.toString()}"/>
        </h:commandButton>
        <h:commandButton value="#{msg['back']}" action="resourcesList"/><br/>
        <br/>
    </h:form>
    </ui:define>
    </ui:composition>
    </body>
</f:view>
</html>
